!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.TextareaSuggestion=t()}}(function(){return function t(e,i,n){function s(o,a){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return s(i?i:t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)s(n[o]);return s}({1:[function(t,e,i){"use strict";!function(){function t(t,e){var s=document.createElement("div");s.id="input-textarea-caret-position-mirror-div",document.body.appendChild(s);var r=s.style,o=window.getComputedStyle?getComputedStyle(t):t.currentStyle;r.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(r.wordWrap="break-word"),r.position="absolute",r.visibility="hidden",i.forEach(function(t){r[t]=o[t]}),n?t.scrollHeight>parseInt(o.height)&&(r.overflowY="scroll"):r.overflow="hidden",s.textContent=t.value.substring(0,e),"INPUT"===t.nodeName&&(s.textContent=s.textContent.replace(/\s/g,"Â "));var a=document.createElement("span");a.textContent=t.value.substring(e)||".",s.appendChild(a);var l={top:a.offsetTop+parseInt(o.borderTopWidth),left:a.offsetLeft+parseInt(o.borderLeftWidth)};return document.body.removeChild(s),l}var i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n=null!=window.mozInnerScreenX;"undefined"!=typeof e&&"undefined"!=typeof e.exports?e.exports=t:window.getCaretCoordinates=t}()},{}],2:[function(t,e,i){String.prototype.startsWith||!function(){"use strict";var t=function(){try{var t={},e=Object.defineProperty,i=e(t,t,t)&&e}catch(n){}return i}(),e={}.toString,i=function(t){if(null==this)throw TypeError();var i=String(this);if(t&&"[object RegExp]"==e.call(t))throw TypeError();var n=i.length,s=String(t),r=s.length,o=arguments.length>1?arguments[1]:void 0,a=o?Number(o):0;a!=a&&(a=0);var l=Math.min(Math.max(a,0),n);if(r+l>n)return!1;for(var h=-1;++h<r;)if(i.charCodeAt(l+h)!=s.charCodeAt(h))return!1;return!0};t?t(String.prototype,"startsWith",{value:i,configurable:!0,writable:!0}):String.prototype.startsWith=i}()},{}],3:[function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(i,"__esModule",{value:!0});var s=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();t("string.prototype.startswith");var r=t("./../bower_components/textarea-caret-position/index.js"),o=function(){function t(e,i){if(n(this,t),!e)throw new Error("Invalid element");"string"==typeof e&&(e=document.querySelector(e)),this.selectedIndex=-1,this.suggestions=[],this.textarea=e,this.textareaStyle=getComputedStyle(this.textarea),this.textareaFontSize=this.textareaStyle["font-size"].replace(/(px)/,"")-0,this.container=null,this.list=[],this.setSuggestion(i),this.prepareContainer(),this.selectionStart=0,this.selectionEnd=0,this.inputText="",this.lastInputText="",this.isDeleted=!1,e.addEventListener("input",this.onInput.bind(this)),e.addEventListener("keydown",this.onKeyDown.bind(this))}return s(t,[{key:"onInput",value:function(t){this.selectionStart=t.target.selectionStart,this.selectionEnd=t.target.selectionEnd,this.lastInputText=this.textarea.value.substring(this.selectionEnd-1,this.selectionEnd),this.isShown?this.isDeleted?console.log(this.lastInputText):this.inputText+=this.lastInputText:this.inputText=this.lastInputText,0!==this.inputText.length&&0!==this.matchedSuggestions.length?(this.prepareItems(),this.showPopup()):this.hidePopup()}},{key:"onKeyDown",value:function(t){switch(t.keyCode){case 8:if(this.isShown){var e=this.inputText.lastIndexOf(this.lastInputText);this.inputText=this.inputText.substring(0,e),this.isDeleted=!0}break;case 13:if(this.isSelected){t.preventDefault();var i=this.matchedSuggestions[this.selectedIndex];this.insertSuggestion(i)}this.hidePopup();break;case 38:this.selectedIndex>0&&this.selectedIndex--,this.isShown&&(t.preventDefault(),this.highlightSelectedIndex());break;case 40:this.selectedIndex<this.matchedSuggestions.length-1&&this.selectedIndex++,this.isShown&&(t.preventDefault(),this.highlightSelectedIndex());break;default:this.isShown?this.isDeleted=!1:this.hidePopup()}}},{key:"highlightSelectedIndex",value:function(){var t=!0,e=!1,i=void 0;try{for(var n,s=this.list[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var r=n.value;r.classList.remove("is-selected")}}catch(o){e=!0,i=o}finally{try{!t&&s["return"]&&s["return"]()}finally{if(e)throw i}}this.list[this.selectedIndex].classList.add("is-selected")}},{key:"setSuggestion",value:function(){var t=void 0===arguments[0]?[]:arguments[0];Array.isArray(t)||(t=[t]),this.suggestions.length=0;var e=!0,i=!1,n=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var o=s.value;"string"==typeof o&&this.suggestions.push(o)}}catch(a){i=!0,n=a}finally{try{!e&&r["return"]&&r["return"]()}finally{if(i)throw n}}}},{key:"prepareContainer",value:function(){null==this.container&&(this.container=document.createElement("ul"),this.container.className="suggestion",this.container.style.position="absolute",this.container.style.display="none",this.container.style.listStyle="none",document.body.appendChild(this.container))}},{key:"onClick",value:function(t){this.insertSuggestion(t.target.textContent),this.hidePopup()}},{key:"prepareItems",value:function(){this.list.length=0,this.container.innerHTML="";var t=!0,e=!1,i=void 0;try{for(var n,s=this.matchedSuggestions[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var r=n.value,o=document.createElement("li");o.className="suggestion__item",o.textContent=r,o.addEventListener("click",this.onClick.bind(this)),this.list.push(o),this.container.appendChild(o)}}catch(a){e=!0,i=a}finally{try{!t&&s["return"]&&s["return"]()}finally{if(e)throw i}}}},{key:"insertSuggestion",value:function(t){this.textarea.setSelectionRange(this.selectionEnd-this.inputText.length,this.selectionEnd),this.textarea.setRangeText(t);var e=this.selectionEnd+t.length;this.textarea.setSelectionRange(e,e)}},{key:"showPopup",value:function(){var t=this.popupPosition;this.container.style.top=t.top+this.textareaFontSize+"px",this.container.style.left=t.left+"px",this.container.style.display="block",this.container.classList.add("is-shown")}},{key:"hidePopup",value:function(){this.container.style.display="none",this.selectedIndex=-1,this.container.classList.remove("is-shown");var t=!0,e=!1,i=void 0;try{for(var n,s=this.list[Symbol.iterator]();!(t=(n=s.next()).done);t=!0){var r=n.value;r.classList.remove("is-selected")}}catch(o){e=!0,i=o}finally{try{!t&&s["return"]&&s["return"]()}finally{if(e)throw i}}}},{key:"isSelected",get:function(){return this.isShown&&-1!==this.selectedIndex}},{key:"isShown",get:function(){return this.container.classList.contains("is-shown")}},{key:"matchedSuggestions",get:function(){var t=this;return this.suggestions.filter(function(e){return e.startsWith(t.inputText)})}},{key:"popupPosition",get:function(){var t=r(this.textarea,this.textarea.selectionEnd);return{top:this.textarea.offsetTop+t.top,left:this.textarea.offsetLeft+t.left}}}]),t}();i["default"]=o,e.exports=i["default"]},{"./../bower_components/textarea-caret-position/index.js":1,"string.prototype.startswith":2}]},{},[3])(3)});